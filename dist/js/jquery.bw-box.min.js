!function(e){"use strict";e.bwBox=function(t,o,n){var l=e(t),a=this;a.DEFAULTS={selectorType:"data",elementSelectors:null,htmlContent:null,complete:null},a.settings={},a.$modalElement=null,a.init=function(){a.settings=e.extend({},a.DEFAULTS,o);try{i()}catch(t){return void console.error(t)}r(),e.isFunction(a.settings.complete)&&a.settings.complete.call(this)};var i=function(){switch(a.settings.selectorType){case"data":if(!e(l.data("modal")).length)throw new Error("No matching modal was found on the page");a.$modalElement=e(l.data("modal"));break;case"element":if(!a.settings.elementSelectors)throw new Error("Please provide an element selector array");if(!a.settings.elementSelectors[n])throw new Error("Please provide an element selector for modal "+(n+1));a.$modalElement=e(a.settings.elementSelectors[n]);break;case"html":if(!a.settings.htmlContent)throw new Error("Please provide content to populate the html element");a.$modalElement=d(a.settings.htmlContent);break;default:throw new Error("Please provide selectorType of data, element, or html")}},d=function(t){var o=e("<div/>",{"class":"bwbox__modal",id:"html-modal-"+n}).append(e("<div/>",{"class":"bwbox__modal__outer"}).append(e("<div/>",{"class":"bwbox__modal__middle"}).append(e("<div/>",{"class":"bwbox__modal__inner"}).append(e("<a/>",{href:"#","class":"bwbox__modal__inner__close",text:"CLOSE X"})).append(e("<div/>",{"class":"bwbox__modal__inner__content",html:t})))));return e("body").append(o),o},s=function(){var t=e("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),o=e("<div>").css({width:"100%"}).appendTo(t).outerWidth();return t.remove(),100-o};a.activateModal=function(){var t=a.$modalElement.find(".bwbox__modal__middle"),o=s()>0?s()-1:0;window.bwboxCurrentScrollTop=e("body").scrollTop(),e("body").addClass("bw-box-active").css("top",-window.bwboxCurrentScrollTop),t.css("top","-3%"),a.$modalElement.fadeIn({queue:!1,duration:200}),t.animate({top:"0%"},200),e("body").css({position:"fixed",overflow:"hidden",width:"100%"}).css("width","-="+o)},a.deactivateModal=function(){a.$modalElement.fadeOut(400,function(){a.$modalElement.find(".bwbox__modal__inner").css("right",0)}),a.$modalElement.find(".bwbox__modal__inner").css("right",-(s()-s()/2)),e("body").removeClass("bw-box-active").css({position:"static",overflow:"auto",width:"100%"}),e("body").scrollTop(window.bwboxCurrentScrollTop)};var r=function(){l.on("click",function(e){a.activateModal(),e.preventDefault()}),a.$modalElement.on("click",".bwbox__modal__inner__close",function(e){a.deactivateModal(),e.preventDefault()}),e(document).on("mouseup touchend",function(e){if(a.$modalElement.is(":visible")){var t=a.$modalElement.find(".bwbox__modal__inner");t.parents(".bwbox__modal");"block"!==t.css("display")&&"inline-block"!==t.css("display")||t.is(e.target)||0!==t.has(e.target).length||a.deactivateModal()}})};a.init()},e.fn.bwBox=function(t){return this.each(function(o){if(window.bwboxCurrentScrollTop=0,void 0===e(this).data("bwBox")){var n=new e.bwBox(this,t,o);e(this).data("bwBox",n)}})}}(jQuery);