!function(e){"use strict";e.fn.bwBox=function(o){var t=e.extend({selectorType:"data",elementSelectors:null,htmlContent:null,complete:null},o);return this.each(function(o){var n;window.bwboxCurrentScrolltop=0;var l=function(t){var n=e("<div/>",{"class":"bwbox__modal",id:"html-modal-"+o}).append(e("<div/>",{"class":"bwbox__modal__outer"}).append(e("<div/>",{"class":"bwbox__modal__middle"}).append(e("<div/>",{"class":"bwbox__modal__inner"}).append(e("<a/>",{href:"#","class":"bwbox__modal__inner__close",text:"CLOSE X"})).append(e("<div/>",{"class":"bwbox__modal__inner__content",html:t})))));return e("body").append(n),n};switch(t.selectorType){case"data":n=e(e(this).data("modal"));break;case"element":if(!t.elementSelectors)throw Error("Please provide an element selector array.");if(!t.elementSelectors[o])throw Error("Please provide an element selector for modal "+(o+1)+".");n=e(t.elementSelectors[o]);break;case"html":if(!t.htmlContent)throw Error("Please provide content to populate the html element");n=l(t.htmlContent);break;default:throw Error("Please provide selectorType of data, element, or html")}var r=function(o){var t=o.find(".bwbox__modal__middle");window.bwboxCurrentScrolltop=e(document).scrollTop(),e("body").css("top",-window.bwboxCurrentScrolltop),t.css("top","-3%"),o.fadeIn({queue:!1,duration:200}),t.animate({top:"0%"},200),e("body").css({position:"fixed",overflow:"hidden"})},a=function(o){o.fadeOut(),e("body").css({position:"static",overflow:"auto"}),e(document).scrollTop(window.bwboxCurrentScrolltop)};e(this).on("click",function(e){r(n),e.preventDefault()}),n.on("click",".bwbox__modal__inner__close",function(e){a(n),e.preventDefault()}),e(document).on("mouseup touchend",function(e){if(n.is(":visible")){var o=n.find(".bwbox__modal__inner");o.parents(".bwbox__modal");("block"===o.css("display")||"inline-block"===o.css("display"))&&(o.is(e.target)||0!==o.has(e.target).length||a(n))}}),e.isFunction(t.complete)&&t.complete.call(this)})}}(jQuery);